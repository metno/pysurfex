#!/usr/bin/env python3
"""Set the geometry definition (LonLatVal) from a observations data set."""
import logging
import sys
import json
import surfex

if __name__ == "__main__":
    kwargs = surfex.parse_args_set_geo_from_obs_set(sys.argv[1:])
    debug = kwargs.get("debug")

    if debug:
        logging.basicConfig(format='%(asctime)s %(levelname)s %(pathname)s:%(lineno)s %(message)s',
                            level=logging.DEBUG)
    else:
        logging.basicConfig(format='%(asctime)s %(levelname)s %(message)s', level=logging.INFO)
    logging.info("************ set_geo_from_obs_set ******************")
    geo = surfex.set_geo_from_obs_set(**kwargs)
    output = kwargs["output"]
    with open(output, mode="w", encoding="utf-8") as file_handler:
        json.dump(geo.json, file_handler)
